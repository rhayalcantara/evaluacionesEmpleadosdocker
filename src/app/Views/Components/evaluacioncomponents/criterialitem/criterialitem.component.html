
<div >
  <h2>Desempe√±o</h2>
  <div  class="table-responsive">
    <table class="table table-bordered">
      <thead class="bg-light">
        <tr>
          <th>Perspectiva</th>
          <th>Objetivo</th>
          <th>Tipo</th>
          <th>Peso</th>
          <th class="text-end">Meta</th>
          <th class="text-end">Logro</th>
          <th class="text-end">%</th>
          <th class="text-end">Resultado</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of desempeno; let index=index">
          <td>{{row.perspectiva}}</td>
          <td>{{row.objetivo}}</td>
          <td>{{row.tipo}}</td>
          <td>
            {{row.peso}}
          </td>
          <td class="text-end">{{row.meta}}</td>
          <td class="text-end">
            <input type="number" (change)="onLogroChange($event, index)" [(ngModel)]="logro[index]" name="evaluacion" min="1" max="100">
          </td>
         
            <td  *ngIf="!row.inverso"> {{ (logro[index]/row.meta)*100 | number:'1.2-2'}}</td>
            <td  *ngIf="!row.inverso"> {{ (((logro[index]/row.meta)*100)*row.peso)/100 | number:'1.2-2'}}</td>
         
         
            <td  *ngIf="row.inverso"> {{ (row.meta/logro[index])*100 | number:'1.2-2'}}</td>    
            <td  *ngIf="row.inverso"> {{ (((row.meta/logro[index])*100)*row.peso)/100 | number:'1.2-2'}}</td>        
          

        </tr>
      </tbody>
      <tfoot>
        <tr>
            <td colspan="4" class="text-end"><strong>Promedio Competencias:</strong></td>
            <td>{{promedioCompetencias | number:'1.2-2'}}%</td>
        </tr>
        <tr>
            <td colspan="4" class="text-end"><strong>Competencias Final ({{porcentajeCompetencias}}%):</strong></td>
            <td>{{competenciasFinal | number:'1.2-2'}}%</td>
        </tr>
    </tfoot>
    </table>

  </div>
</div>
<!-- criterialitem.component.html -->
<div *ngIf="evaluacion.evaluacionGoals.length>0">
  <h2>Competencias</h2>
  <div class="criteria-section" *ngFor="let met of evaluacion.evaluacionGoals; let index=index">
   
    
    <div class="criteria-item">
      <table>
        <thead>
          <tr>
            <th>
              <h3>{{met.goal.objetivo.nombre}} </h3>
            </th>
            <th>
              <h3>Empleado</h3>
            </th>
            <th *ngIf="supervisor">
              <h3>Lider</h3>
            </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
      <div class="criteria-info">                
        <div class="criteria-description">
          <strong>Descripcion:</strong>
          <div class="description-text">{{met.goal.objetivo.descripcion}}</div>
        </div>
      </div>
    </td>
    <td>
      <app-emojirating class="emoji-container"  [namex]="index"
      [goalempleadorepuesta]="evaluacion.goalEmpleadoRespuestas[index]"
      [supervisor]="false"
      (selecionemoji)="onRespuestaChange($event,index)"></app-emojirating>
    </td>
    <td *ngIf="supervisor">
      <app-emojirating class="emoji-container"  [namex]="index"
      [goalempleadorepuesta]="evaluacion.goalEmpleadoRespuestas[index]"
      [supervisor]="supervisor"
      (selecionemoji)="onRespuestaChange($event,index)"></app-emojirating>
    </td>
    </tr>
    </tbody>

    </table>

    </div>
  </div>
  <table class="table table-bordered">
    <tfoot>
    <tr>
        <td colspan="7" class="text-end"><strong>Promedio Competencia:</strong></td>
        <td>{{promedioCompetencias | number:'1.2-2'}}%</td>
    </tr>
    <tr>
        <td colspan="7" class="text-end"><strong>Competencia Final ({{porcentajeCompetencia}}%):</strong></td>
        <td>{{CompetenciaFinal | number:'1.2-2'}}%</td>
    </tr>
  </tfoot>
  </table>
  
</div>
